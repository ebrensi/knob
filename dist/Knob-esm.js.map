{"mappings":"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","sources":["src/Knob.ts","src/handleChange.ts"],"sourcesContent":["import { handleChange } from \"./handleChange\"\n\nconst DEBOUNCE_DELAY = 10 // ms\n\ntype CursorType = boolean | number\n\nconst DefaultOptions = {\n  value: 50,\n\n  min: 0,\n  max: 100,\n  step: 1,\n\n  cursor: <CursorType>false,\n  thickness: 0.35,\n  lineCap: <CanvasRenderingContext2D[\"lineCap\"]>\"butt\",\n  readOnly: false,\n  displayInput: true,\n\n  width: 200,\n  height: 200,\n\n  bgColor: \"#EEEEEE\",\n  fgColor: \"#87CEEB\",\n  label: \"\",\n  labelColor: \"#888\",\n\n  angleOffset: 0,\n  angleArc: 360,\n\n  className: \"\",\n  activeClass: \"\",\n}\n\nexport type KnobOptions = typeof DefaultOptions\n\ntype KnobProperties = {\n  options: KnobOptions\n  canvas: HTMLCanvasElement\n  input: HTMLInputElement\n  label: HTMLSpanElement\n  value: number\n  getValue: () => number\n  setValue: (value: number, event?: boolean) => void\n}\n\ntype ProtoKnob = Partial<KnobProperties> & HTMLDivElement\nexport type KnobElement = KnobProperties & HTMLDivElement\n\nexport function Knob(knobOptions: Partial<KnobOptions>): KnobElement {\n  const options = { ...DefaultOptions, ...knobOptions }\n\n  // Create Canvas Element\n  const canvas = document.createElement(\"canvas\")\n  canvas.height = options.height\n  canvas.width = options.width\n  canvas.style.position = \"absolute\"\n  const ctx = <CanvasRenderingContext2D>canvas.getContext(\"2d\")\n\n  // Create Input Element\n  const fontScale =\n    Math.max(\n      String(Math.abs(options.max)).length,\n      String(Math.abs(options.min)).length,\n      2\n    ) + 2\n\n  const input = document.createElement(\"input\")\n  input.value = String(options.value)\n  input.disabled = options.readOnly\n\n  const lineWidth = (options.width / 2) * options.thickness\n\n  Object.assign(input.style, {\n    position: \"absolute\",\n    top: `${options.width / 2 - options.width / 7}px`,\n    left: `${lineWidth}px`,\n    width: `${options.width - lineWidth * 2}px`,\n    \"vertical-align\": \"middle\",\n    border: 0,\n    background: \"none\",\n    font: `bold ${(options.width / fontScale) >> 0}px Arial`,\n    \"text-align\": \"center\",\n    color: options.fgColor,\n    padding: \"0px\",\n    \"-webkit-appearance\": \"none\",\n    display: !options.displayInput ? \"none\" : \"\",\n  })\n\n  // Create Label Element\n  const label = document.createElement(\"span\")\n  Object.assign(label.style, {\n    color: options.labelColor,\n    position: \"absolute\",\n    bottom: 0,\n    \"font-size\": \"80%\",\n    \"text-align\": \"center\",\n    \"pointer-events\": \"none\",\n    top: `${options.width / 2 + options.width / 8 - 3}px`,\n    left: 0,\n    right: 0,\n  })\n  label.innerHTML = options.label\n\n  // Create div element\n  const div: ProtoKnob = document.createElement(\"div\")\n  Object.assign(div.style, {\n    display: \"inline-block\",\n    position: \"relative\",\n    height: `${options.height}px`,\n    width: `${options.width}px`,\n    \"touch-action\": \"none\",\n  })\n  if (options.className) {\n    div.classList.add(options.className)\n  }\n\n  div.appendChild(canvas)\n  div.appendChild(input)\n  div.appendChild(label)\n\n  // Attach HTML Elements to the div element\n  Object.assign(div, { options, canvas, input, label })\n\n  let renderedValue = options.value\n  let animating = false\n  let _timeout: number\n\n  function refreshCanvas() {\n    if (renderedValue === options.value) {\n      animating = false\n    } else {\n      animating = true\n      renderedValue = options.value\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\n      draw(options, ctx)\n      input.value = String(options.value)\n      window.requestAnimationFrame(refreshCanvas)\n    }\n  }\n\n  // Attach methods to the div\n  div.getValue = () => options.value\n\n  div.setValue = (value: number, event?: boolean) => {\n    value = Math.min(options.max, Math.max(options.min, value))\n    options.value = value\n    div.value = value\n    if (!animating) {\n      refreshCanvas()\n    }\n    if (event === true && div.onchange) {\n      /*\n       * Perform debounced callback\n       */\n      let timeout = _timeout\n      window.clearTimeout(timeout)\n      timeout = window.setTimeout(div.onchange, DEBOUNCE_DELAY)\n      _timeout = timeout\n    }\n  }\n\n  input.addEventListener(\"change\", (e) => {\n    const el = <HTMLInputElement>e.target\n    div.setValue?.(+el.value)\n  })\n\n  draw(options, ctx)\n\n  if (!options.readOnly) {\n    handleChange(<KnobElement>div)\n  }\n\n  return <KnobElement>div\n}\n\nfunction draw(options: KnobOptions, ctx: CanvasRenderingContext2D) {\n  // deg to rad\n  const angleOffset = (options.angleOffset * Math.PI) / 180\n  const angleArc = (options.angleArc * Math.PI) / 180\n\n  const angle =\n    ((options.value - options.min) * angleArc) / (options.max - options.min)\n\n  const xy = options.width / 2\n  const lineWidth = xy * options.thickness\n  const radius = xy - lineWidth / 2\n\n  const startAngle = 1.5 * Math.PI + angleOffset\n  const endAngle = 1.5 * Math.PI + angleOffset + angleArc\n\n  let startAt = startAngle\n  let endAt = startAt + angle\n\n  if (options.cursor) {\n    const cursorSize =\n      options.cursor === true ? options.thickness : options.cursor\n    const cursorExt = cursorSize / 100 || 1\n    startAt = endAt - cursorExt\n    endAt = endAt + cursorExt\n  }\n\n  ctx.lineWidth = lineWidth\n  ctx.lineCap = options.lineCap\n\n  ctx.beginPath()\n  ctx.strokeStyle = options.bgColor\n  ctx.arc(xy, xy, radius, endAngle, startAngle, true)\n  ctx.stroke()\n\n  ctx.beginPath()\n  ctx.strokeStyle = options.fgColor\n  ctx.arc(xy, xy, radius, startAt, endAt, false)\n  ctx.stroke()\n}\n","import type { KnobElement, KnobOptions } from \"./Knob\"\n\nexport function handleChange(knob: KnobElement) {\n  const D_listen = document.addEventListener\n  const D_mute = document.removeEventListener\n  const canvas = <HTMLCanvasElement>knob.canvas\n  const options = <KnobOptions>knob.options\n  const activeClass = options.activeClass\n\n  canvas.onpointerdown = function (e: PointerEvent) {\n    e.preventDefault()\n    const offset = getOffset(canvas)\n\n    function pointerMove(e: PointerEvent) {\n      knob.setValue(xyToValue(options, e.pageX, e.pageY, offset), true)\n    }\n\n    function pointerUp(e: PointerEvent) {\n      if (activeClass) {\n        knob.classList.remove(activeClass)\n      }\n      D_mute(\"pointermove\", pointerMove)\n      D_mute(\"pointerup\", pointerUp)\n    }\n\n    if (activeClass) {\n      knob.classList.add(activeClass)\n    }\n\n    D_listen(\"pointermove\", pointerMove)\n    D_listen(\"pointerup\", pointerUp)\n\n    pointerMove(e)\n  }\n}\n\ntype point2D = { x: number; y: number }\nfunction xyToValue(\n  options: KnobOptions,\n  x: number,\n  y: number,\n  offset: point2D\n) {\n  const PI2 = 2 * Math.PI\n  const w2 = options.width / 2\n  const angleArc = (options.angleArc * Math.PI) / 180\n  const angleOffset = (options.angleOffset * Math.PI) / 180\n\n  let angle =\n    Math.atan2(x - (offset.x + w2), -(y - offset.y - w2)) - angleOffset\n\n  if (angleArc !== PI2 && angle < 0 && angle > -0.5) {\n    angle = 0\n  } else if (angle < 0) {\n    angle += PI2\n  }\n\n  const result =\n    ~~(0.5 + (angle * (options.max - options.min)) / angleArc) + options.min\n  return Math.max(Math.min(result, options.max), options.min)\n}\n\nfunction getOffset(el: HTMLCanvasElement) {\n  const result: point2D = { x: 0, y: 0 }\n  while (el) {\n    result.x += el.offsetLeft\n    result.y += el.offsetTop\n    el = <HTMLCanvasElement>el.offsetParent\n  }\n\n  return result\n}\n"],"names":[],"version":3,"file":"Knob-esm.js.map"}