var e,t,n,a;function o(e,t,n,a){const o=2*Math.PI,i=e.width/2,s=e.angleArc*Math.PI/180,l=e.angleOffset*Math.PI/180;let c=Math.atan2(t-(a.x+i),-(n-a.y-i))-l;s!==o&&c<0&&c>-.5?c=0:c<0&&(c+=o);const r=~~(.5+c*(e.max-e.min)/s)+e.min;return Math.max(Math.min(r,e.max),e.min)}function i(e){const t={x:0,y:0};for(;e;)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.offsetParent;return t}e=module.exports,t="Knob",n=()=>l,Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0});const s={value:50,min:0,max:100,step:1,cursor:!1,thickness:.35,lineCap:"butt",readOnly:!1,displayInput:!0,width:200,height:200,bgColor:"#EEEEEE",fgColor:"#87CEEB",label:"",labelColor:"#888",angleOffset:0,angleArc:360,className:"",activeClass:""};function l(e){const t={...s,...e},n=document.createElement("canvas");n.height=t.height,n.width=t.width,n.style.position="absolute";const a=n.getContext("2d"),l=Math.max(String(Math.abs(t.max)).length,String(Math.abs(t.min)).length,2)+2,r=document.createElement("input");r.value=String(t.value),r.disabled=t.readOnly;const u=t.width/2*t.thickness;Object.assign(r.style,{position:"absolute",top:t.width/2-t.width/7+"px",left:`${u}px`,width:t.width-2*u+"px","vertical-align":"middle",border:0,background:"none",font:`bold ${t.width/l>>0}px Arial`,"text-align":"center",color:t.fgColor,padding:"0px","-webkit-appearance":"none",display:t.displayInput?"":"none"});const h=document.createElement("span");Object.assign(h.style,{color:t.labelColor,position:"absolute",bottom:0,"font-size":"80%","text-align":"center","pointer-events":"none",top:t.width/2+t.width/8-3+"px",left:0,right:0}),h.innerHTML=t.label;const d=document.createElement("div");Object.assign(d.style,{display:"inline-block",position:"relative",height:`${t.height}px`,width:`${t.width}px`}),t.className&&d.classList.add(t.className),d.appendChild(n),d.appendChild(r),d.appendChild(h),Object.assign(d,{options:t,canvas:n,input:r,label:h});let m,p=t.value,g=!1;function f(){p===t.value?g=!1:(g=!0,p=t.value,a.clearRect(0,0,n.width,n.height),c(t,a),r.value=String(t.value),window.requestAnimationFrame(f))}return d.getValue=()=>t.value,d.setValue=(e,n)=>{if(e=Math.min(t.max,Math.max(t.min,e)),t.value=e,d.value=e,g||f(),!0===n&&d.onchange){let e=m;window.clearTimeout(e),e=window.setTimeout(d.onchange,16),m=e}},r.addEventListener("change",(e=>{const t=e.target;d.setValue?.(+t.value)})),c(t,a),t.readOnly||function(e){const t=document.addEventListener,n=document.removeEventListener,a=e.canvas,s=e.options,l=s.activeClass;a.onmousedown=function(c){c.preventDefault();const r=i(a);function u(t){e.setValue(o(s,t.pageX,t.pageY,r),!0)}l&&e.classList.add(l),t("mousemove",u),t("mouseup",(function t(a){l&&e.classList.remove(l),n("mousemove",u),n("mouseup",t)})),u(c)},a.ontouchstart=function(c){c.preventDefault();const r=c.touches.length-1,u=i(a);function h(t){e.setValue(o(s,t.touches[r].pageX,t.touches[r].pageY,u),!0)}l&&e.classList.add(l),t("touchmove",h),t("touchend",(function t(){l&&e.classList.remove(l),n("touchmove",h),n("touchend",t)})),h(c)}}(d),d}function c(e,t){const n=e.angleOffset*Math.PI/180,a=e.angleArc*Math.PI/180,o=(e.value-e.min)*a/(e.max-e.min),i=e.width/2,s=i*e.thickness,l=i-s/2,c=1.5*Math.PI+n,r=1.5*Math.PI+n+a;let u=c,h=u+o;if(e.cursor){const t=(!0===e.cursor?e.thickness:e.cursor)/100||1;u=h-t,h+=t}t.lineWidth=s,t.lineCap=e.lineCap,t.beginPath(),t.strokeStyle=e.bgColor,t.arc(i,i,l,r,c,!0),t.stroke(),t.beginPath(),t.strokeStyle=e.fgColor,t.arc(i,i,l,u,h,!1),t.stroke()}
//# sourceMappingURL=Knob.js.map
