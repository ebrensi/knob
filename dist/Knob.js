var e,t,n,a;function i(e){const t=document.addEventListener,n=document.removeEventListener,a=e.canvas,i=e.options,o=i.activeClass;a.onpointerdown=function(l){l.preventDefault();const s=function(e){const t={x:0,y:0};for(;e;)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.offsetParent;return t}(a);function c(t){e.setValue(function(e,t,n,a){const i=2*Math.PI,o=e.width/2,l=e.angleArc*Math.PI/180,s=e.angleOffset*Math.PI/180;let c=Math.atan2(t-(a.x+o),-(n-a.y-o))-s;l!==i&&c<0&&c>-.5?c=0:c<0&&(c+=i);const r=~~(.5+c*(e.max-e.min)/l)+e.min;return Math.max(Math.min(r,e.max),e.min)}(i,t.pageX,t.pageY,s),!0)}o&&e.classList.add(o),t("pointermove",c),t("pointerup",(function t(a){o&&e.classList.remove(o),n("pointermove",c),n("pointerup",t)})),c(l)}}e=module.exports,t="Knob",n=()=>l,Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0});const o={value:50,min:0,max:100,step:1,cursor:!1,thickness:.35,lineCap:"butt",readOnly:!1,displayInput:!0,width:200,height:200,bgColor:"#EEEEEE",fgColor:"#87CEEB",label:"",labelColor:"#888",angleOffset:0,angleArc:360,className:"",activeClass:""};function l(e){const t={...o,...e},n=document.createElement("canvas");n.height=t.height,n.width=t.width,n.style.position="absolute";const a=n.getContext("2d"),l=Math.max(String(Math.abs(t.max)).length,String(Math.abs(t.min)).length,2)+2,c=document.createElement("input");c.value=String(t.value),c.disabled=t.readOnly;const r=t.width/2*t.thickness;Object.assign(c.style,{position:"absolute",top:t.width/2-t.width/7+"px",left:`${r}px`,width:t.width-2*r+"px","vertical-align":"middle",border:0,background:"none",font:`bold ${t.width/l>>0}px Arial`,"text-align":"center",color:t.fgColor,padding:"0px","-webkit-appearance":"none",display:t.displayInput?"":"none"});const d=document.createElement("span");Object.assign(d.style,{color:t.labelColor,position:"absolute",bottom:0,"font-size":"80%","text-align":"center","pointer-events":"none",top:t.width/2+t.width/8-3+"px",left:0,right:0}),d.innerHTML=t.label;const h=document.createElement("div");Object.assign(h.style,{display:"inline-block",position:"relative",height:`${t.height}px`,width:`${t.width}px`,"touch-action":"none"}),t.className&&h.classList.add(t.className),h.appendChild(n),h.appendChild(c),h.appendChild(d),Object.assign(h,{options:t,canvas:n,input:c,label:d});let u,p=t.value,g=!1;function m(){p===t.value?g=!1:(g=!0,p=t.value,a.clearRect(0,0,n.width,n.height),s(t,a),c.value=String(t.value),window.requestAnimationFrame(m))}return h.getValue=()=>t.value,h.setValue=(e,n)=>{if(e=Math.min(t.max,Math.max(t.min,e)),t.value=e,h.value=e,g||m(),!0===n&&h.onchange){let e=u;window.clearTimeout(e),e=window.setTimeout(h.onchange,10),u=e}},c.addEventListener("change",(e=>{const t=e.target;h.setValue?.(+t.value)})),s(t,a),t.readOnly||i(h),h}function s(e,t){const n=e.angleOffset*Math.PI/180,a=e.angleArc*Math.PI/180,i=(e.value-e.min)*a/(e.max-e.min),o=e.width/2,l=o*e.thickness,s=o-l/2,c=1.5*Math.PI+n,r=1.5*Math.PI+n+a;let d=c,h=d+i;if(e.cursor){const t=(!0===e.cursor?e.thickness:e.cursor)/100||1;d=h-t,h+=t}t.lineWidth=l,t.lineCap=e.lineCap,t.beginPath(),t.strokeStyle=e.bgColor,t.arc(o,o,s,r,c,!0),t.stroke(),t.beginPath(),t.strokeStyle=e.fgColor,t.arc(o,o,s,d,h,!1),t.stroke()}
//# sourceMappingURL=Knob.js.map
